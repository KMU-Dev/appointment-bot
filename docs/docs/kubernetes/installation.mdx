---
title: å®‰è£ Minikube
sidebar_label: å®‰è£
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

å®‰è£ Kubernetes æ˜¯ä¸€å€‹æµ©å¤§å·¥ç¨‹ï¼Œè«‹æ ¹æ“šæ‚¨çš„ä½œæ¥­ç³»çµ±ä¾ç…§æŒ‡ç¤ºå®‰è£ Kubernetesã€‚

## å®‰è£ Ubuntu

Kubernetes æ˜¯ä¸€å€‹å®¹å™¨ç®¡ç†å·¥å…·ï¼Œå› æ­¤æˆ‘å€‘å¿…é ˆå…ˆå®‰è£å®¹å™¨ç³»çµ±ï¼Œç„¶è€Œ **Windows 10 å®¶ç”¨ç‰ˆ** ä¸¦ä¸æ”¯æ´å®¹å™¨ç³»çµ±ï¼Œ
å¥½åœ¨ Windows æœ€è¿‘æ¨å‡ºäº† **WSL 2**ï¼Œè®“æˆ‘å€‘èƒ½åœ¨ Windows ä¸­åŸ·è¡Œ Linux å­ç³»çµ±ï¼Œ
ç¾åœ¨å°±è®“æˆ‘å€‘ä¾†å®‰è£ Linux ä¸­æœ€å»£ç‚ºäººçŸ¥çš„ Ubuntu ç³»çµ±å§ï¼

:::info
å¦‚æœæ‚¨çš„é›»è…¦ç‚ºä»¥ä¸‹ä½œæ¥­ç³»çµ±ï¼š

* Windows 10 **å°ˆæ¥­ç‰ˆ**ã€**ä¼æ¥­ç‰ˆ**æˆ–**æ•™è‚²ç‰ˆ**
* macOS

æ­å–œä½ ï¼Œä¸éœ€è¦å®‰è£ Linux ç³»çµ±å³å¯åŸ·è¡Œ Dockerï¼Œè«‹ç›´æ¥è·³åˆ° [å®‰è£ Docker](#å®‰è£-docker)ã€‚
:::

<Tabs
    groupId="os"
    defaultValue="windows"
    values={[
        {label: 'Windows', value: 'windows'},
    ]}
>
<TabItem value="windows">

:::note ç³»çµ±éœ€æ±‚

* CPU æ˜¯ x64 æ¶æ§‹
* Windows 10 ä½œæ¥­ç³»çµ±ï¼Œ**ç‰ˆæœ¬ 1903** æˆ–æ›´é«˜ï¼Œå«**çµ„ä»¶ 18362** æˆ–æ›´é«˜çµ„ä»¶

:::


### å•Ÿç”¨ Windows å­ç³»çµ± Linux ç‰ˆ

æ‚¨å¿…é ˆå…ˆå•Ÿç”¨ã€ŒWindows å­ç³»çµ± Linux ç‰ˆã€é¸ç”¨åŠŸèƒ½ï¼Œç„¶å¾Œæ‰èƒ½åœ¨ Windows ä¸Šå®‰è£ä»»ä½• Linux ç™¼è¡Œç‰ˆæœ¬ã€‚

ä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†é–‹å•Ÿ PowerShell ä¸¦åŸ·è¡Œï¼š

```powershell title="PowerShell"
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
```

### å•Ÿç”¨è™›æ“¬æ©Ÿå™¨åŠŸèƒ½

åœ¨å®‰è£ WSL 2 ä¹‹å‰ï¼Œæ‚¨å¿…é ˆå•Ÿç”¨ **è™›æ“¬æ©Ÿå™¨å¹³å°** é¸ç”¨åŠŸèƒ½ã€‚

ä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†é–‹å•Ÿ PowerShell ä¸¦åŸ·è¡Œï¼š

```powershell title="PowerShell"
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```

**é‡æ–°å•Ÿå‹•** æ‚¨çš„é›»è…¦ï¼Œä»¥å®Œæˆ WSL å®‰è£ä¸¦æ›´æ–°è‡³ WSL 2ã€‚

### ä¸‹è¼‰ Linux æ ¸å¿ƒæ›´æ–°å¥—ä»¶

ä¸‹è¼‰ [WSL2 Linux æ ¸å¿ƒæ›´æ–°å¥—ä»¶ (é©ç”¨æ–¼ x64 é›»è…¦)](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)
ä¸¦åŸ·è¡Œæ›´æ–°å¥—ä»¶ã€‚ \(æŒ‰å…©ä¸‹ä»¥åŸ·è¡Œ - ç³»çµ±æœƒæç¤ºæ‚¨æä¾›æ›´é«˜çš„æ¬Šé™ï¼Œè«‹é¸å– [æ˜¯] ä»¥æ ¸å‡†æ­¤å®‰è£ä½œæ¥­ã€‚\)

### å°‡ WSL 2 è¨­å®šç‚ºé è¨­ç‰ˆæœ¬

åœ¨å®‰è£æ–°çš„ Linux ç™¼è¡Œç‰ˆæœ¬æ™‚ï¼Œé–‹å•Ÿ PowerShellï¼Œç„¶å¾ŒåŸ·è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œä»¥å°‡ WSL 2 è¨­å®šç‚ºé è¨­ç‰ˆæœ¬ï¼š

```powershell title="PowerShell"
wsl --set-default-version 2
```

### å®‰è£ Ubuntu 20.04.01

1. é–‹å•Ÿ Microsoft Store ä¸­ï¼ŒUbuntu çš„ [æ‡‰ç”¨ç¨‹å¼ç•«é¢](https://www.microsoft.com/store/productId/9NBLGGH4MSV6)ã€‚

2. å¾ Ubuntu çš„å®‰è£é é¢ä¸­ï¼Œé¸å– [å–å¾—]ã€‚
    
    ![Microsoft Store Ubuntu](https://docs.microsoft.com/zh-tw/windows/wsl/media/ubuntustore.png)

ç•¶æ‚¨ç¬¬ä¸€æ¬¡å•Ÿå‹•æ–°å®‰è£çš„ Linux ç™¼è¡Œç‰ˆæœ¬æ™‚ï¼Œä¸»æ§å°è¦–çª—æœƒéš¨å³é–‹å•Ÿï¼Œè€Œç³»çµ±æœƒè¦æ±‚æ‚¨ç­‰å€™ä¸€åˆ°å…©åˆ†é˜ï¼Œè®“æª”æ¡ˆè§£å£“ç¸®ä¸¦å„²å­˜åœ¨æ‚¨çš„é›»è…¦ä¸Šã€‚
æœªä¾†çš„æ‰€æœ‰å•Ÿå‹•æ™‚é–“éƒ½æ‡‰è©²æœƒä½æ–¼ä¸€ç§’ã€‚

æ¥è‘—ï¼Œæ‚¨å¿…é ˆç‚ºæ–°çš„ Linux ç™¼è¡Œç‰ˆæœ¬è¨­å®šä½¿ç”¨è€…å¸³æˆ¶å’Œå¯†ç¢¼ã€‚
![Ubuntu å•Ÿå‹•ç•«é¢](https://docs.microsoft.com/zh-tw/windows/wsl/media/ubuntuinstall.png)

**æ­å–œï¼æ‚¨å·²æˆåŠŸå®‰è£ä¸¦è¨­å®šèˆ‡ Windows ä½œæ¥­ç³»çµ±å®Œå…¨æ•´åˆçš„ Ubuntu ç³»çµ±ï¼**

</TabItem>
</Tabs>


## å®‰è£ Docker

Docker æ˜¯ä¸€å€‹é–‹æºçš„å®¹å™¨ç®¡ç†ç³»çµ±ï¼Œæˆ‘å€‘çš„ Kubernetes å°‡æœƒä»¥ Docker ä½œç‚ºåŸ·è¡Œç’°å¢ƒã€‚

<Tabs
    groupId="os"
    defaultValue="windows"
    values={[
        {label: 'Windows', value: 'windows'},
        {label: 'macOS', value: 'macos'},
    ]}
>
<TabItem value="windows">

### ä¸‹è¼‰ Docker Desktop for Windows

å‰å¾€ Docker Hub [ä¸‹è¼‰ Docker Desktop for Windows](https://hub.docker.com/editions/community/docker-ce-desktop-windows/)ã€‚

![Docker Desktop for Windows](./assets/docker-desktop-for-windows.png)

é»æ“Šå³é‚Šçš„ **Get Docker** ä¸‹è¼‰æŒ‰éˆ•ã€‚

### åŸ·è¡Œå®‰è£æª”

1. é›™æ“Š **Docker Desktop Installer.exe** åŸ·è¡Œå®‰è£ç²¾éˆã€‚
2. åœ¨å®‰è£ç¨‹å¼ä¸­ï¼Œæ‰“é–‹ **Enable WSL 2 Features** é¸é …ã€‚
3. æˆäºˆæ¬Šé™çµ¦å®‰è£ç²¾éˆä¸¦ä¾ç…§æŒ‡ç¤ºå®Œæˆå®‰è£ã€‚
4. ç•¶å®‰è£ç²¾éˆåŸ·è¡Œå®Œç•¢ï¼Œé»å³ **é—œé–‰** æŒ‰éˆ•ã€‚

### å•Ÿå‹• Docker Desktop

åœ¨æ¡Œé¢æ‰¾åˆ° Docker Desktop çš„åœ–ç¤ºï¼Œæˆ–æ˜¯åœ¨æœå°‹æ¬„ä¸­æœå°‹ Docker Desktopï¼Œé»æ“Šä¾†å•Ÿå‹• Docker Desktopã€‚

![search for Docker app](https://docs.docker.com/docker-for-windows/images/docker-app-search.png)

ç•¶é¯¨é­šåœ–ç¤ºå‡ºç¾åœ¨é›»è…¦çš„å·¥ä½œåˆ—ä¸Šæ™‚ï¼Œä»£è¡¨ Docker Desktop å·²ç¶“æˆåŠŸå•Ÿå‹•äº†ã€‚

![whale on taskbar](https://docs.docker.com/docker-for-windows/images/whale-icon-systray.png)

æ­å–œä½ ï¼Œä½ ç¾åœ¨æˆåŠŸåœ¨ Windows 10 å®¶ç”¨ç‰ˆä¸ŠæˆåŠŸåŸ·è¡Œ Docker äº†ã€‚

</TabItem>
<TabItem value="macos">

:::note ç³»çµ±éœ€æ±‚

* **Mac å¿…é ˆæ“æœ‰ 2010 æˆ–æ›´æ–°çš„ç¡¬é«”è¨­å‚™ï¼Œä¸¦æ­è¼‰ Intel çš„ CPU**ï¼Œ
    ä¸”å¿…é ˆæ”¯æ´ memory management unit (MMU) virtualizationï¼ŒåŒ…å« Extended Page Tables (EPT) å’Œ Unrestricted Modeã€‚
    å¯ä»¥åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†æª¢æŸ¥ Mac æ˜¯å¦æ”¯æ´ä»¥ä¸ŠåŠŸèƒ½ï¼š
    ```bash
    sysctl kern.hv_support
    ```

    å¦‚æœ Mac æ”¯æ´ Hypervisor æ¶æ§‹ï¼ŒæŒ‡ä»¤å°‡æœƒé¡¯ç¤ºï¼š
    ```
    kern.hv_support: 1
    ```

* **macOS çš„ç‰ˆæœ¬å¿…é ˆè¦æ˜¯ 10.14 æˆ–æ›´æ–°çš„ç‰ˆæœ¬**ï¼ŒåŒ…å« Mojaveã€Catalina å’Œ Big Sur
* æœ€å°‘ 4GB çš„ RAM
* VirtualBox 4.3.30 æˆ–æ›´èˆŠçš„ç‰ˆæœ¬ä¸å¯ä»¥å®‰è£åœ¨é›»è…¦ä¸Š

:::

### ä¸‹è¼‰ Docker Desktop for Mac

å‰å¾€ Docker Hub [ä¸‹è¼‰ Docker Desktop for Mac](https://hub.docker.com/editions/community/docker-ce-desktop-mac/)ã€‚

![Docker Desktop for Mac](./assets/docker-desktop-for-mac.png)

é»æ“Šå³é‚Šçš„ **Get Docker** ä¸‹è¼‰æŒ‰éˆ•ã€‚


### åŸ·è¡Œå®‰è£æª”

1. é›™æ“Š **Docker.dmg** åŸ·è¡Œå®‰è£ç²¾éˆï¼Œä¸¦ä¸”å°‡ Docker åœ–ç¤ºæ‹‰åˆ° æ‡‰ç”¨ç¨‹å¼\(Applications\) è³‡æ–™å¤¾ä¸­ã€‚

    ![Install Docker app](https://docs.docker.com/docker-for-mac/images/docker-app-drag.png)

2. åœ¨ æ‡‰ç”¨ç¨‹å¼\(Applications\) è³‡æ–™å¤¾ä¸­é›™æ“Š **Docker.app**ã€‚

    ![Docker app in Hockeyapp](https://docs.docker.com/docker-for-mac/images/docker-app-in-apps.png)

3. å¦‚æœ Docker çš„åœ–ç¤ºå‡ºç¾åœ¨ä¸Šæ–¹çš„ç‹€æ…‹åˆ—ï¼Œä»£è¡¨ Docker å·²ç¶“æˆåŠŸåŸ·è¡Œäº†ã€‚

    ![Whale in menu bar](https://docs.docker.com/docker-for-mac/images/whale-in-menu-bar.png)

</TabItem>
</Tabs>


## å®‰è£ Minikube

Minikube æ˜¯æœ¬åœ°ç«¯çš„ Kubernetesï¼Œè®“æˆ‘å€‘èƒ½åœ¨è‡ªå·±çš„é›»è…¦ä¸­è¼•é¬†éƒ¨å±¬ Kubernetesï¼Œæ–¹ä¾¿æˆ‘å€‘é–‹ç™¼ã€æ¸¬è©¦å’Œå­¸ç¿’ã€‚

<Tabs
    groupId="os"
    defaultValue="windows"
    values={[
        {label: 'Windows', value: 'windows'},
        {label: 'macOS', value: 'macos'},
    ]}
>
<TabItem value="windows">

### å®‰è£ Chocolatey

Chocolatey æ˜¯ Windows ç³»çµ±ä¸Šçš„è»Ÿé«”ç®¡ç†å·¥å…·ï¼Œè®“ä½ èƒ½é€éç°¡å–®çš„æŒ‡ä»¤è¼•é¬†çš„ç®¡ç†å’Œå‡ç´šè»Ÿé«”ã€‚

ä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†é–‹å•Ÿ PowerShell ä¸¦åŸ·è¡Œï¼š

```powershell title="PowerShell"
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))
```

ç•¶æŒ‡ä»¤åŸ·è¡Œå®Œç•¢ï¼Œæ‚¨è®Šå¯ä»¥é–‹å§‹ä½¿ç”¨ Chocolateyï¼Œå¦‚éœ€å®Œæ•´çš„æŒ‡ä»¤èªªæ˜ï¼Œè«‹è¦‹ [Chocolatey èªªæ˜æ–‡ä»¶](https://docs.chocolatey.org/en-us/getting-started)ã€‚

### ä½¿ç”¨ Chocolatey å®‰è£ Minikube

ä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†é–‹å•Ÿ PowerShell ä¸¦åŸ·è¡Œï¼š

```powershell title="PowerShell"
choco install minikube
```

ç•¶å®‰è£ç¨‹å¼è©¢å•ä½ æ˜¯å¦åŸ·è¡Œå®‰è£è…³æœ¬æ™‚ï¼Œè«‹åœ¨æŒ‡ä»¤åˆ—ä¸­è¼¸å…¥ A (ä»£è¡¨å…è¨±æ‰€æœ‰çš„å®‰è£è…³æœ¬)ã€‚

</TabItem>
<TabItem value="macos">

### ä¸‹è¼‰ä¸¦å®‰è£ Minikube

é–‹å•Ÿ **çµ‚ç«¯æ©Ÿ** ä¸¦åŸ·è¡Œï¼š

```bash
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
sudo install minikube-darwin-amd64 /usr/local/bin/minikube
```

åŸ·è¡Œæ™‚ç³»çµ±æœƒæç¤ºè¼¸å…¥æ‚¨çš„å¯†ç¢¼ï¼Œè«‹æŒ‰ç…§æŒ‡ä½¿è¼¸å…¥ã€‚

</TabItem>
</Tabs>


## åŸ·è¡Œ Minikube

Minikube æ”¯æ´è¨±å¤šçš„é©…å‹•ç¨‹å¼ï¼Œé€™ä»½æ•™å­¸ä¸­ï¼Œæˆ‘å€‘æœƒç”¨å‰›å‰›å®‰è£çš„ Docker ä½œç‚ºé©…å‹•ç¨‹å¼ã€‚

å°‡ Docker ä½œç‚º Minikube é è¨­çš„é©…å‹•ç¨‹å¼ï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
minikube config set driver docker
```

æ¥è‘—åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹• Kubernetes Clusterï¼š

```bash
minikube start
```

:::note

ç¬¬ä¸€æ¬¡åŸ·è¡Œæ™‚ Minikube æœƒä¸‹è¼‰ Kubernetes æ˜ åƒæª”ï¼Œæ ¹æ“šç¶²è·¯é€Ÿåº¦æœƒå½±éŸ¿åˆ°åŸ·è¡Œæ™‚é–“ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œ10 åˆ†é˜ä»¥å…§éƒ½å±¬æ­£å¸¸ç‹€æ³ï¼Œè«‹è€å¿ƒç­‰å€™ã€‚

:::

ç•¶æ‚¨çœ‹åˆ°çµ‚ç«¯æ©Ÿä¸Šé¡¯ç¤ºï¼š
```
ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
```
ä»£è¡¨æ‚¨çš„ Kubernetes Cluster å·²ç¶“æˆåŠŸåŸ·è¡Œã€‚


## ç®¡ç† Minikube

ç•¶æ‚¨éœ€è¦æš«åœ Kubernetes Clusters æ™‚ï¼Œè«‹åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
minikube pause
```

ç•¶æ‚¨æƒ³è¦åœæ­¢ Kubernetes Cluster æ™‚ï¼Œè«‹åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
minikube stop
```

å¦‚éœ€åˆªé™¤ Kubernetes Cluser ä»¥é‡æ–°é–‹å§‹æ–°çš„ Clusterï¼Œè«‹åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
minikube delete
```


## ä¸‹ä¸€æ­¥

* [å®‰è£é–‹ç™¼å·¥å…·](kubernetes/tools.mdx)
* å¦‚æœåœ¨å®‰è£ WSL 2 æ™‚ç™¼ç”Ÿå•é¡Œï¼Œè«‹åƒç…§ [Windows èªªæ˜æ–‡ä»¶](https://docs.microsoft.com/zh-tw/windows/wsl/install-win10)
* å¦‚æœå®‰è£ Docker æ™‚ç™¼ç”Ÿå•é¡Œï¼Œæˆ–æƒ³é€²ä¸€æ­¥äº†è§£ Docker åŠŸèƒ½ï¼Œè«‹åƒç…§ [Docker èªªæ˜æ–‡ä»¶](https://docs.docker.com/get-docker/)
* å¦‚éœ€é€²ä¸€æ­¥äº†è§£ Chocolatey æŒ‡ä»¤ï¼Œè«‹åƒé–± [Chocloatey èªªæ˜æ–‡ä»¶](https://docs.chocolatey.org/en-us/choco/commands/)
* å¦‚æœå®‰è£ Minikube æ™‚ç™¼ç”Ÿå•é¡Œï¼Œæˆ–æƒ³é€²ä¸€æ­¥äº†è§£ Minikubeï¼Œè«‹åƒé–± [Minikube èªªæ˜æ–‡ä»¶](https://minikube.sigs.k8s.io/docs/)
