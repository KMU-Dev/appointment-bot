kind: Pod
metadata:
  name: appointment-bot-kaniko
  namespace: jenkins
spec:
  containers:
    - name:  builder
      image:  gcr.io/kaniko-project/executor:latest
      command: ["tail", "-f", "/dev/null"]  # this or any command that is bascially a noop is required, this is so that you don't overwrite the entrypoint of the base container
      volumeMounts:
        - name: docker-config
          mountPath: /kaniko/.docker
  volumes:
    - name: docker-config
      projected:
        sources:
          - secret:
              name: github-docker-config
              items:
                - key: .dockerconfigjson
                  path: config.json